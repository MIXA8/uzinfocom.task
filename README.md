Laravel File Management Project
===============================

**Описание**
------------

Этот проект реализует систему управления файлами с проверкой ролей и авторизацией. В проекте используется Laravel и Vite для фронтенда. Реализована проверка на активированность пользователя.

**Как запустить проект**
------------------------

### **1\. Установка зависимостей**

Установите PHP-зависимости:

`   composer install   `

Установите Node.js-зависимости:

`   npm install   `

### **2\. Настройка переменных окружения**

Создайте файл .env на основе шаблона:

`   cp .env.example .env   `

Настройте параметры подключения к базе данных в файле .env:

`DB_CONNECTION=pgsql  
 DB_HOST=127.0.0.1  
 DB_PORT=3306  
 DB_DATABASE=your_database_name  
 DB_USERNAME=your_username  
 DB_PASSWORD=your_password   `

### **3\. Запуск миграции**

После настройки базы данных выполните команду для создания таблиц и их структуры:

`   php artisan migrate   `

### **4\. Добавление пользователей и ролей**

Запустите команду сидирования, чтобы автоматически добавить базовые роли и пользователей:

`   php artisan app:create-initial-users   `

Эта команда добавит:

*   **1 Админа**

*   **1 Модератора**

*   **2 Обычных пользователей**


### **5\. Запуск сервера**

Запустите сервер Laravel:

`   php artisan serve   `

Запустите Vite для фронтенда:

`   npm run dev   `

Теперь проект будет доступен по адресу:

`   http://localhost:8000   `


### Документация API

Этот документ содержит описание доступных API-эндпоинтов и необходимых параметров для работы с системой аутентификации и управления файлами.

**Аутентификация (AUTH)**
-------------------------

### **Регистрация пользователя**

**Эндпоинт:**POST {{url}}/api/register

**Описание:**Позволяет зарегистрировать нового пользователя, передав необходимые данные.

**Обязательные параметры (в теле запроса):**

*   **name** – Имя пользователя (строка, обязательно)

*   **email** – Адрес электронной почты пользователя (строка, обязательно)

*   **password** – Пароль пользователя (строка, обязательно)


### **Получение информации о текущем пользователе**

**Эндпоинт:**GET {{url}}/api/user

**Описание:**Возвращает информацию о текущем аутентифицированном пользователе.

**Обязательные заголовки:**

*   **Authorization: Bearer** – Токен авторизации, полученный после логина.


### **Вход пользователя (логин)**

**Эндпоинт:**POST {{url}}/api/login

**Описание:**Авторизует пользователя и возвращает токен для последующих запросов.

**Обязательные параметры (в теле запроса):**

*   **email** – Зарегистрированный email пользователя (строка, обязательно)

*   **password** – Пароль пользователя (строка, обязательно)


**Операции с файлами (FILES)**
------------------------------

### **Загрузка файла**

**Эндпоинт:**POST {{url}}/api/files

**Описание:**Позволяет загрузить файл на сервер. Требуется авторизация.

**Обязательные заголовки:**

*   **Authorization: Bearer** – Токен авторизации.


**Обязательные параметры (в теле запроса):**

*   **file** – Загружаемый файл (формат multipart/form-data, обязательно)


### **Получение списка файлов**

**Эндпоинт:**GET {{url}}/api/files

**Описание:**Возвращает список файлов, привязанных к текущему аутентифицированному пользователю.

**Обязательные заголовки:**

*   **Authorization: Bearer** – Токен авторизации.


### **Удаление файла**

**Эндпоинт:**DELETE {{url}}/api/files/{id}

**Описание:**Удаляет файл по его уникальному идентификатору. Пользователь должен быть авторизован и иметь необходимые права.

**Обязательные заголовки:**

*   **Authorization: Bearer** – Токен авторизации.


**Параметры пути:**

*   **id** – Уникальный идентификатор файла, который требуется удалить (целое число, обязательно).


**Примечания:**
---------------

*   Замените {{url}} на базовый URL вашего приложения (например, http://localhost:8000, если приложение запущено локально).

*   Убедитесь, что токены авторизации надежно сохраняются после логина и используются для каждого защищенного запроса.

*   Все операции с файлами защищены, поэтому пользователь должен быть аутентифицирован и иметь соответствующие права для доступа или удаления файлов.
